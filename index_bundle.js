!function(){"use strict";function e(e,t){if(0!==t.length){var n=t.slice(0,10);e.innerHTML="<ul>".concat(n.map((function(e){return"<li>".concat(e,"</li>")})).join(""),"</ul>")}}function t(e){var t="https://api.openweathermap.org/data/2.5/weather?units=metric&q=".concat(e,"&appid=").concat("325a22275c1255e94a9b1ee8ae86259a");return fetch(t).then((function(e){return e.json()}))}function n(e){return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e,"&zoom=13&size=400x400&key=AIzaSyCn9o27r_AnjgLXWymUmKW7b5C3y62OAG8")}function r(e,t){var r=t.querySelector("#weatherBlock");0!==r.childNodes.length&&(r.innerHTML="");var a=t.querySelector("#cityMap"),c=document.createElement("h2");c.id="cityTitle";var i=document.createElement("p");i.id="currentTemp";var o=document.createElement("p");o.id="weatherDescription";var u=document.createElement("img");u.id="weatherIcon";var d=e.name;c.innerText=d,a.src=n(d);var p=Math.round(e.main.temp);i.innerText=p>0?"+".concat(p,"° С"):"".concat(p,"° С"),o.innerText=e.weather[0].description,u.src="http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),r.appendChild(c),r.appendChild(i),r.appendChild(u),r.appendChild(o)}var a=document.querySelector("#container");!function(a){var c=document.createElement("form"),i=document.createElement("input");i.id="userInput",i.placeholder="Type city and press enter!",i.required=!0,i.autofocus=!0;var o=document.createElement("button");o.innerText="Get weather";var u=document.createElement("div");u.id="weatherBlock";var d=document.createElement("div");d.id="historyList";var p=document.createElement("h2");p.innerText="You have watched the weather in:";var l=function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);"loglevel:webpack-dev-server"!==n&&e.push(JSON.parse(localStorage.getItem(n)))}return e}();e(d,l);var h=document.createElement("img");h.id="cityMap",c.appendChild(i),c.appendChild(o),o.addEventListener("click",(function(c){c.preventDefault();var o=i.value;""===o?alert("Enter some city"):(i.value="",t(o).then((function(t){r(t,a);var c,i=t.name;-1===l.indexOf(i)&&(l.unshift(i),e(d,l),c=i,localStorage.setItem("".concat(c),JSON.stringify(c))),h.src=n(i)})))})),d.addEventListener("click",(function(e){t(e.target.innerText).then((function(e){r(e,a),document.querySelector("#cityMap").src=n(e.name)}))})),a.appendChild(c),a.appendChild(u),a.appendChild(h),a.appendChild(p),a.appendChild(d)}(a),fetch("https://get.geojs.io/v1/ip/geo.json").then((function(e){return e.json()})).then((function(e){return e.city})).then((function(e){return t(e).then((function(e){return r(e,a)}))}))}();
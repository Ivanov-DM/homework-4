!function(){"use strict";function e(e,t){if(0!==t.length){var n=t.slice(0,10);e.innerHTML="<ul>".concat(n.map((function(e){return"<li>".concat(e,"</li>")})).join(""),"</ul>")}}function t(e){var t="https://api.openweathermap.org/data/2.5/weather?units=metric&q=".concat(e,"&appid=").concat("325a22275c1255e94a9b1ee8ae86259a");return fetch(t).then((function(e){return e.json()}))}function n(e){return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e,"&zoom=13&size=400x400&key=AIzaSyCn9o27r_AnjgLXWymUmKW7b5C3y62OAG8")}function r(e,t){var r=t.querySelector("#weatherBlock");if("404"!==e.cod){0!==r.childNodes.length&&(r.innerHTML="");var a=t.querySelector("#cityMap"),c=document.createElement("h2");c.id="cityTitle";var i=document.createElement("p");i.id="currentTemp";var o=document.createElement("p");o.id="weatherDescription";var d=document.createElement("img");d.id="weatherIcon";var l=e.name;c.innerText=l,a.src=n(l);var p=Math.round(e.main.temp);i.innerText=p>0?"+".concat(p,"° С"):"".concat(p,"° С"),o.innerText=e.weather[0].description,d.src="http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),r.appendChild(c),r.appendChild(i),r.appendChild(d),r.appendChild(o)}else r.innerHTML='<p style="text-align: center; width: 100%; height: 100%; line-height: 130px; font-size: 2rem;">\n                                 Wrong city name, please try again\n                              </p>'}var a=document.querySelector("#container");!function(a){var c=document.createElement("form"),i=document.createElement("input");i.id="userInput",i.placeholder="Type city and press enter!",i.required=!0,i.autofocus=!0;var o=document.createElement("button");o.innerText="Get weather";var d=document.createElement("div");d.id="weatherBlock";var l=document.createElement("div");l.id="historyList";var p=document.createElement("h2");p.innerText="You have watched the weather in:";var u=function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);"loglevel:webpack-dev-server"!==n&&e.push(JSON.parse(localStorage.getItem(n)))}return e}();e(l,u);var h=document.createElement("img");h.id="cityMap",c.appendChild(i),c.appendChild(o),o.addEventListener("click",(function(c){c.preventDefault();var o=i.value;""!==o?(i.value="",t(o).then((function(t){if(r(t,a),"404"!==t.cod){var c,i=t.name;-1===u.indexOf(i)&&(u.unshift(i),e(l,u),c=i,localStorage.setItem("".concat(c),JSON.stringify(c))),h.src=n(i)}else h.src=""}))):alert("Enter some city")})),l.addEventListener("click",(function(e){t(e.target.innerText).then((function(e){r(e,a),document.querySelector("#cityMap").src=n(e.name)}))})),a.appendChild(c),a.appendChild(d),a.appendChild(h),a.appendChild(p),a.appendChild(l)}(a),fetch("https://get.geojs.io/v1/ip/geo.json").then((function(e){return e.json()})).then((function(e){return e.city})).then((function(e){return t(e).then((function(e){return r(e,a)}))}))}();